<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Blog — Angel Vasquez</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet">
  <!-- reuse your site CSS (change path if yours is css/style.css) -->
  <link rel="stylesheet" href="style.css">
  <style>
    /* minimal blog styles */
    .blog-hero{ padding:4rem 1rem 2rem; text-align:center }
    .blog-hero p{ color:var(--muted) }
    .posts{ max-width:var(--container); margin:0 auto; padding:0 1rem 3rem }
    .post-list{ display:grid; gap:1rem; grid-template-columns:repeat(auto-fit,minmax(280px,1fr)) }
    .post-card{
      background:var(--card); border:1px solid var(--border);
      border-radius:var(--radius); padding:1rem; box-shadow:var(--shadow);
      display:flex; flex-direction:column; gap:.5rem;
    }
    .post-card time{ color:var(--muted); font-size:.95rem }
    .post-card h4{ margin:.1rem 0 }
    .post-card p{ color:var(--muted); margin:0 }
    .post-card .tags{ display:flex; gap:.4rem; flex-wrap:wrap; margin-top:.25rem }
    .tag{ font-size:.85rem; padding:.15rem .5rem; border:1px solid var(--border); border-radius:999px; color:var(--muted) }
    .blog-footer{ text-align:center; color:var(--muted); margin-top:2rem }
    .filters{ display:flex; gap:.5rem; flex-wrap:wrap; margin:1rem 0 1.25rem }
    .filters input{ padding:.5rem .7rem; border-radius:8px; border:1px solid var(--border); background:#0f1116; color:var(--text) }
    .filters select{ padding:.5rem .7rem; border-radius:8px; border:1px solid var(--border); background:#0f1116; color:var(--text) }
  </style>
</head>
<body>
  <header class="site-header">
    <nav class="nav">
      <h1 class="logo">Angel Vasquez</h1>
      <p>Cybersecurity Student • Problem Solver • Lifelong Learner</p>
      <ul class="nav-links">
        <li><a href="index.html#about">About</a></li>
        <li><a href="index.html#projects">Projects</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="index.html#resume">Resume</a></li>
        <li><a href="index.html#contact">Contact</a></li>
      </ul>
    </nav>
  </header>

  <main>
    <section class="blog-hero container">
      <h2>Blog</h2>
      <p>Notes on labs, tools, and lessons learned in cybersecurity.</p>

      <div class="filters">
        <input type="search" id="q" placeholder="Search posts…">
        <select id="tag">
          <option value="">All tags</option>
        </select>
      </div>
    </section>

    <section class="posts">
      <div id="postList" class="post-list" aria-live="polite"></div>
      <p id="emptyState" class="blog-footer" style="display:none;">No posts match your filters.</p>
    </section>
  </main>

  <footer class="site-footer">
    <p>© 2025 Angel Vasquez</p>
  </footer>

  <!-- Load your post metadata -->
  <script src="posts.js"></script>
  <script>
  (function(){
    // expects a global POSTS array from posts.js
    const list = document.getElementById('postList');
    const empty = document.getElementById('emptyState');
    const q = document.getElementById('q');
    const tagSel = document.getElementById('tag');

    // build tag dropdown
    const allTags = Array.from(new Set(POSTS.flatMap(p => p.tags || []))).sort();
    allTags.forEach(t => {
      const opt = document.createElement('option');
      opt.value = t; opt.textContent = t;
      tagSel.appendChild(opt);
    });

    function render(items){
      list.innerHTML = '';
      if (!items.length) { empty.style.display = 'block'; return; }
      empty.style.display = 'none';
      items.forEach(p => {
        const card = document.createElement('article');
        card.className = 'post-card';
        card.innerHTML = `
          <time datetime="${p.date}">${new Date(p.date).toLocaleDateString()}</time>
          <h4><a href="${p.url}">${p.title}</a></h4>
          <p>${p.excerpt || ''}</p>
          ${p.tags?.length ? `<div class="tags">${p.tags.map(t=>`<span class="tag">${t}</span>`).join('')}</div>` : ''}
        `;
        list.appendChild(card);
      });
    }

    function applyFilters(){
      const text = q.value.trim().toLowerCase();
      const t = tagSel.value;
      let items = POSTS.slice().sort((a,b)=> new Date(b.date) - new Date(a.date));
      if (text) {
        items = items.filter(p =>
          (p.title || '').toLowerCase().includes(text) ||
          (p.excerpt || '').toLowerCase().includes(text)
        );
      }
      if (t) {
        items = items.filter(p => (p.tags || []).includes(t));
      }
      render(items);
    }

    q.addEventListener('input', applyFilters);
    tagSel.addEventListener('change', applyFilters);

    applyFilters();
  })();
  </script>
</body>
</html>
